{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api/api';import{Link}from'react-router-dom';import Pagination from'../components/Pagination';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BookList(){const[data,setData]=useState({books:[],page:1,pages:1});const[page,setPage]=useState(1);const[search,setSearch]=useState('');const[genre,setGenre]=useState('');const[sort,setSort]=useState('');const fetchBooks=async function(){let p=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;try{const q=new URLSearchParams();q.set('page',p);if(search)q.set('search',search);if(genre)q.set('genre',genre);if(sort)q.set('sort',sort);const res=await api.get(\"/books?\".concat(q.toString()));setData(res.data);}catch(err){console.error(err);}};useEffect(()=>{fetchBooks(page);},[page,search,genre,sort]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Books\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginBottom:12},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Search by title or author\",value:search,onChange:e=>setSearch(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Genre filter\",value:genre,onChange:e=>setGenre(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{value:sort,onChange:e=>setSort(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Sort: Newest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"year\",children:\"Sort: Year\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rating\",children:\"Sort: Avg Rating\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setPage(1);fetchBooks(1);},children:\"Apply\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list-grid\",children:data.books.map(b=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:b.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"small\",children:[\"By \",b.author,\" \\u2022 \",b.year||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{className:\"small\",children:[\"Genre: \",b.genre||'N/A']}),/*#__PURE__*/_jsx(\"p\",{className:\"rating\",children:b.avgRating?b.avgRating:'No ratings'}),/*#__PURE__*/_jsx(Link,{to:\"/books/\".concat(b._id),children:\"Details\"})]},b._id))}),/*#__PURE__*/_jsx(Pagination,{page:data.page,pages:data.pages,onChange:setPage})]});}","map":{"version":3,"names":["React","useEffect","useState","api","Link","Pagination","jsx","_jsx","jsxs","_jsxs","BookList","data","setData","books","page","pages","setPage","search","setSearch","genre","setGenre","sort","setSort","fetchBooks","p","arguments","length","undefined","q","URLSearchParams","set","res","get","concat","toString","err","console","error","children","style","display","gap","marginBottom","placeholder","value","onChange","e","target","onClick","className","map","b","title","author","year","avgRating","to","_id"],"sources":["C:/Users/sunil/OneDrive/Desktop/book-review-platform-deploy-ready/frontend/src/pages/BookList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '../api/api';\nimport { Link } from 'react-router-dom';\nimport Pagination from '../components/Pagination';\n\nexport default function BookList(){\n  const [data, setData] = useState({ books: [], page:1, pages:1 });\n  const [page, setPage] = useState(1);\n  const [search, setSearch] = useState('');\n  const [genre, setGenre] = useState('');\n  const [sort, setSort] = useState('');\n\n  const fetchBooks = async (p=1) => {\n    try {\n      const q = new URLSearchParams();\n      q.set('page', p);\n      if (search) q.set('search', search);\n      if (genre) q.set('genre', genre);\n      if (sort) q.set('sort', sort);\n      const res = await api.get(`/books?${q.toString()}`);\n      setData(res.data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  useEffect(()=>{ fetchBooks(page); }, [page, search, genre, sort]);\n\n  return (\n    <div>\n      <h1>Books</h1>\n\n      <div style={{display:'flex', gap:8, marginBottom:12}}>\n        <input placeholder=\"Search by title or author\" value={search} onChange={e=>setSearch(e.target.value)} />\n        <input placeholder=\"Genre filter\" value={genre} onChange={e=>setGenre(e.target.value)} />\n        <select value={sort} onChange={e=>setSort(e.target.value)}>\n          <option value=\"\">Sort: Newest</option>\n          <option value=\"year\">Sort: Year</option>\n          <option value=\"rating\">Sort: Avg Rating</option>\n        </select>\n        <button onClick={()=>{ setPage(1); fetchBooks(1); }}>Apply</button>\n      </div>\n\n      <div className=\"list-grid\">\n        {data.books.map(b=>(\n          <div className=\"card\" key={b._id}>\n            <h3>{b.title}</h3>\n            <p className=\"small\">By {b.author} â€¢ {b.year || 'N/A'}</p>\n            <p className=\"small\">Genre: {b.genre || 'N/A'}</p>\n            <p className=\"rating\">{b.avgRating ? b.avgRating : 'No ratings'}</p>\n            <Link to={`/books/${b._id}`}>Details</Link>\n          </div>\n        ))}\n      </div>\n      <Pagination page={data.page} pages={data.pages} onChange={setPage} />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}